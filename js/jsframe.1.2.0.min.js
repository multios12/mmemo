var org;if(org===undefined){org={}}if(org.riversun===undefined){org.riversun={}}org.riversun.JSFrame=(function(){var n={},l={};l.LEFT_TOP="LEFT_TOP";l.HCENTER_TOP="CENTER_TOP";l.RIGHT_TOP="RIGHT_TOP";l.LEFT_VCENTER="LEFT_CENTER";l.HCENTER_VCENTER="CENTER_CENTER";l.CENTER=l.HCENTER_VCENTER;l.RIGHT_VCENTER="RIGHT_CENTER";l.LEFT_BOTTOM="LEFT_BOTTOM";l.HCENTER_BOTTOM="CENTER_BOTTOM";l.RIGHT_BOTTOM="RIGHT_BOTTOM";function b(){var q=this;this.showTitleBar=true;this.showCloseButton=true;this.titleBarCaption="";this.titleBarCaptionFontSize="12px";this.titleBarCaptionFontWeight="bold";this.titleBarHeight="24px";this.useIframe=false;this.useFrame=true;this.setUseIFrame=function(r){q.useIframe=r;q.useFrame=!r;return q};this.titleBarCaptionLeftMargin="5px";this.titleBarColorDefault="lightgray";this.titleBarColorFocused="#d3e1ee";this.titleBarCaptionColorDefault="";this.titleBarCaptionColorFocused="";this.titleBarBorderBottomDefault="1px solid rgba(0,0,0,0.2)";this.titleBarBorderBottomFocused=null;this.frameBorderRadius="6px";this.frameBorderWidthDefault="1px";this.frameBorderWidthFocused=this.frameBorderWidthDefault;this.frameBorderColorDefault="rgba(1, 1, 1, 0.2)";this.frameBorderColorFocused=this.frameBorderColorDefault;this.frameBorderStyle="solid";this.frameBoxShadow="5px 5px 10px rgba(0, 0, 0, 0.3)";this.frameBackgroundColor="white";this._partsBuilder=null;this.frameComponents=[];this.frameHeightAdjust=1;this.getFrameInnerBorderRadius=function(r,s){if(!r){return}if(s){return(parseInt(r.frameBorderRadius,10)-parseInt(r.frameBorderWidthFocused,10))+"px"}return(parseInt(r.frameBorderRadius,10)-parseInt(r.frameBorderWidthDefault,10))+"px"};this.onInitialize=function(){if(q.showCloseButton){var s=q.getPartsBuilder(),v="\u274c",u="\u2716",t="\u274e";var x=s.buildTextButtonAppearance();x.size=14;x.captionShiftYpx=0;x.captionFontRatio=1;x.borderRadius=2;x.backgroundColorPressed="transparent";x.backgroundColorDefault="transparent";x.caption=u;x.captionColorDefault="gray";x.captionColorFocused="gray";x.captionColorHovered="silver";x.captionColorPressed="black";x.borderWidth=0;x.borderColorDefault="#aaaaaa";x.borderStyle="solid";var A=s.buildTextButton(x);var z=-10;var r=-18;var w="RIGHT_TOP";var y=q.addFrameComponent("closeButton",A,z,r,w)}}}b.prototype.getPartsBuilder=function(){var q=this;if(q._partsBuilder===null){q._partsBuilder=new o()}return q._partsBuilder};b.prototype.initialize=function(){var q=this;q.onInitialize()};b.prototype.addFrameComponent=function(v,r,q,u,t){var s=new h(v,r,q,u,t);if(r._onTakeFocus&&r._onReleaseFocus){s.setFocusCallback(r._onTakeFocus,r._onReleaseFocus)}this.frameComponents.push(s);return s};function g(s,r){function q(){}q.prototype=r.prototype;s.prototype=new q();s.prototype.constructor=s;s.superConstructor=r;s.superClass=r.prototype}n.CBEAN={};n.CBEAN.HTML_ELEMENT="span";n.CBEAN.HTML_ELEMENT_ID_PREFIX="htmlElement_";n.CBEAN.TYPE_NAME="bean";function d(r,w,v,t,q,s){var u=this;u.id=r;u.parentCanvas=null;u.htmlElement=null;u.htmlElement=document.createElement(n.CBEAN.HTML_ELEMENT);u.htmlElement.id=n.CBEAN.HTML_ELEMENT_ID_PREFIX+r;u.htmlElement.style.position="absolute";u.htmlElement.style.left=parseInt(w,10)+"px";u.htmlElement.style.top=parseInt(v,10)+"px";u.htmlElement.style.width=parseInt(t,10)+"px";u.htmlElement.style.height=parseInt(q,10)+"px";if(s!==null){u.htmlElement.style.zIndex=s}u.htmlElement.style.borderColor="#000000";u.htmlElement.style.fontSize="1px";u.htmlElement.parent=u;u.htmlElement.onmousedown=u.onmouseDown;u.htmlElement.typeName=n.CBEAN.TYPE_NAME;u.htmlElement.usage="nothing";u.htmlElement.isRangeLimited=false;u.htmlElement.argX=1;u.htmlElement.argY=1}d.prototype.setMovable=function(q){var r=this;if(q){r.htmlElement.argX=1;r.htmlElement.argY=1}else{r.htmlElement.argX=0;r.htmlElement.argY=0}return r};d.prototype.setParentCanvas=function(r){var q=this;q.parentCanvas=r;q.htmlElement.parentCanvas=q.parentCanvas};d.prototype.onmouseDown=function(s){var q=this;var r=q.parent;if(s.button==0){q.parentCanvas.currentObject=q;q.parentCanvas.pullUp(r.id)}else{if(s.button==2){return false}}q.parentCanvas.offsetX=s.pageX-parseInt(q.parentCanvas.currentObject.style.left,10);q.parentCanvas.offsetY=s.pageY-parseInt(q.parentCanvas.currentObject.style.top,10);return false};n.CANVAS={};n.CANVAS.HTML_ELEMENT="div";function j(r,x,w,v,t,q){function s(){this.x=0;this.y=0;this.screenX=0;this.screenY=0;this.deltaX=0;this.deltaY=0;this.isMoved=false;this.targetTypeName=null;this.targetUsage=null;this.targetObject=null}var u=this;u.currentObject=null;u.onTopObject=null;u.offsetX=0;u.offsetY=0;u.mouseDownSource=null;u.id=x;u.canvasElement=null;u.parentElement=r;u.beanList=new Array();u.eventData=new s();u.baseZIndex=0;u.setBaseZIndex=function(y){u.baseZIndex=y};u.getBaseZIndex=function(){return u.baseZIndex};u.canvasElement=document.createElement(n.CANVAS.HTML_ELEMENT);u.canvasElement.id=u.id;u.canvasElement.style.position="absolute";u.canvasElement.style.left=parseInt(w)+"px";u.canvasElement.style.top=parseInt(v)+"px";u.canvasElement.style.width=parseInt(t)+"px";u.canvasElement.style.height=parseInt(q)+"px";u.canvasElement.style.backgroundColor="transparent";u.canvasElement.style.borderStyle="none";u.canvasElement.style.borderWidth="0px";u.parentElement.appendChild(u.canvasElement)}j.prototype.mouseMove=function(B){var F=this;if(F.currentObject){F.eventData.targetTypeName=F.currentObject.typeName;F.eventData.targetUsage=F.currentObject.usage;F.eventData.targetObject=F.currentObject;var q=B.pageX-F.offsetX;var E=B.pageY-F.offsetY;var A=B.pageX;var z=B.pageY;var x=F.currentObject.style.left;var r=F.currentObject.style.top;var t=parseInt(q,10);var D=parseInt(E,10);var s=t+parseInt(F.currentObject.style.width,10);var C=D+parseInt(F.currentObject.style.height,10);var v=parseInt(F.canvasElement.style.width,10);var u=parseInt(F.canvasElement.style.height,10);var y=0;var w=0;if(F.currentObject.isRangeLimited==true&&(t<=0||s>v||D<=0||C>u)){y=0;w=0}else{y=(parseInt(q,10)-parseInt(x,10));w=(parseInt(E,10)-parseInt(r,10));F.currentObject.style.left=(parseInt(F.currentObject.style.left)+y*F.currentObject.argX)+"px";F.currentObject.style.top=(parseInt(F.currentObject.style.top)+w*F.currentObject.argY)+"px"}F.eventData.deltaX=y;F.eventData.deltaY=w;return F.eventData}return null};j.prototype.mouseUp=function(r){var q=this;q.currentObject=null;q.mouseDownSource=null};j.prototype.pullUp=function(q){var u=this;var v=[];var s=u.beanList;for(var t in s){v.push(s[t])}var r=s[q];u.pullUpSort(r,v,u.baseZIndex);u.onTopObject=r};j.prototype.pullUpSort=function(u,s,q){var t=this;u.htmlElement.style.zIndex=s.length+q;s.sort(function(v,w){return -parseInt(v.htmlElement.style.zIndex,10)+parseInt(w.htmlElement.style.zIndex,10)});for(var r in s){s[r].htmlElement.style.zIndex=(s.length-1)-r+q}};j.prototype.removeBean=function(q){var t=this;var s=t.beanList;var r=s[q];t.canvasElement.removeChild(r.htmlElement);delete s[q]};j.prototype.addBean=function(q){var u=this;var t=u.beanList;t[q.id]=q;var s=0;for(var r in t){s++}q.htmlElement.style.zIndex=s+u.baseZIndex;q.setParentCanvas(u);this.canvasElement.appendChild(q.htmlElement)};n.CFRAME={};n.CFRAME.CANVAS_ELEMENT_BGCOLOR="transparent";n.CFRAME.TITLE_BAR_CLASS_DEFAULT="jsFrame.titlebar";n.CFRAME.TITLE_BAR_CLASS_FOCUSED="jsFrame.titlebar.focused";g(f,d);function f(y,A,r,q,x,v,u,B){var O=this;f.superConstructor.call(this,y,A,r,q,x,v);O.anchor=l.LEFT_TOP;O.showTitleBar=B.showTitleBar;O.canvasNetHeight=null;O.canvasNetWidth=null;O.frameHeightAdjust=B.frameHeightAdjust;O.frameComponentMap={};O.canvas=null;O.myCanvasId=null;O.floatingButton=null;O.titleBarClassNameDefault=n.CFRAME.TITLE_BAR_CLASS_DEFAULT;O.titleBarClassNameFocused=n.CFRAME.TITLE_BAR_CLASS_FOCUSED;O.titleBarHeight=B.titleBarHeight;O.titleBarCaption=B.titleBarCaption;O.titleBarCaptionLeftMargin=B.titleBarCaptionLeftMargin;O.titleBarCaptionFontSize=B.titleBarCaptionFontSize;O.titleBarCaptionFontWeight=B.titleBarCaptionFontWeight;O.titleBarBorderBottomDefault=B.titleBarBorderBottomDefault;O.titleBarBorderBottomFocused=B.titleBarBorderBottomFocused;O.titleAdjustWidth=0;O.windowId=y;O.exBorderWidth=0;O.myCanvasId=y+"_canvas";var H=document.createElement("img");H.src="";H.style.position="absolute";H.style.left="2px";H.style.top="2px";H.style.width="16px";H.style.height="16px";H.style.visibility="hidden";O.titleBar=document.createElement("div");O.titleBar.className=".jsFrame.titlebar";if(O.showTitleBar){O.titleBar.id=y+"_title";O.titleBar.style.position="absolute";O.titleBar.style.top="0px";O.titleBar.style.left="0px";O.titleBar.style.width=(q-O.titleAdjustWidth)+"px";O.titleBar.style.userSelect="none";if(O.titleBarHeight){var K=0;if(O.titleBarBorderBottomDefault){K=-1}O.titleBar.style.height=(parseInt(O.titleBarHeight,10)+0)+"px"}O.titleBar.style.backgroundColor=O.titleBarColorDefault;O.titleBar.style.zIndex=0;O.titleBar.style.color=O.titleBarCaptionColorDefault;O.titleBar.style.fontSize=O.titleBarCaptionFontSize;O.titleBar.style.fontWeight=O.titleBarCaptionFontWeight;O.titleBar.style.textAlign="center";O.titleBar.style.lineHeight=O.titleBar.style.height;O.titleBar.style.borderBottom=O.titleBarBorderBottomDefault;O.titleBar.style.overflow="hidden";var E=document.createTextNode("");var s=document.createElement("span");s.id=O.id+"_titleBarText";if(O.titleBarCaptionLeftMargin!=null){s.style.position="absolute";s.style.left=parseInt(O.titleBarCaptionLeftMargin,10)+"px"}else{s.style.position="absolute";s.style.left="0px";s.style.right="0px"}s.style.top="0px";s.appendChild(E);O.titleBar.appendChild(s)}O.htmlElement.appendChild(O.titleBar);var F=parseInt(O.titleBarHeight,10)-K;var t=parseInt(O.titleAdjustWidth,10);if(O.showTitleBar){}else{F=0;t=0;K=0}O.canvasNetWidth=q-t;O.canvasNetHeight=x-F-t-1-K+O.frameHeightAdjust;O.htmlElement.style.cursor="move";O.canvas=new j(O.htmlElement,O.myCanvasId,0,F,q-t,x-F-t);O.canvas.canvasElement.style.backgroundColor=n.CFRAME.CANVAS_ELEMENT_BGCOLOR;O.canvas.canvasElement.style.cursor="default";O.canvas.canvasElement.onmousedown=O.canvasMouseDown;O.canvas.canvasElement.parentCFrame=O;var L=parseInt(O.canvas.canvasElement.style.width,10);var D=parseInt(O.canvas.canvasElement.style.height,10);var J=16;var G=16;var M=16;var I=new c(O.myCanvasId+"_RD",L-J+M,D-G+M,J,G,0,"RD");I.htmlElement.style.cursor="se-resize";I.htmlElement.argX=0;I.htmlElement.argY=0;var P=new c(O.myCanvasId+"_DD",0,D-G+M,L-J+M,G,0,"DD");P.htmlElement.style.cursor="n-resize";P.htmlElement.argX=0;P.htmlElement.argY=0;var z=new c(O.myCanvasId+"_RR",L-J+M,0,J,D-G+M,0,"RR");z.htmlElement.style.cursor="w-resize";z.htmlElement.argY=0;z.htmlElement.argX=0;O.canvas.addBean(I);O.canvas.addBean(P);O.canvas.addBean(z);O.removeMarkers=function(){O.canvas.removeBean(I.id);O.canvas.removeBean(P.id);O.canvas.removeBean(z.id);O.htmlElement.style.cursor="default"};O.removeMarkers2=function(){O.canvas.removeBean(I.id);O.canvas.removeBean(P.id);O.canvas.removeBean(z.id)};for(var C in B.frameComponents){var N=B.frameComponents[C];N.setFrame(O);if("closeButton"==N.id){N.htmlElement.onclick=O.close}O.addFrameComponent(N)}O.htmlElement.style.backgroundColor="transparent";O.htmlElement.oncontextmenu=this.contextMenu;var w=0;O.caribValue=w;O.htmlElement.style.borderWidth=O.exBorderWidth+"px";O.htmlElement.style.width=(parseInt(O.htmlElement.style.width,10)-w)+"px";O.htmlElement.style.height=(parseInt(O.htmlElement.style.height,10)-w+1)+"px";O.htmlElement.typeName="cwindow";O.htmlElement.overflow="auto";if(B.frameBorderStyle){O.htmlElement.style.borderStyle=B.frameBorderStyle}if(B.frameBoxShadow){O.htmlElement.style.boxShadow=B.frameBoxShadow}if(parseInt(B.frameBorderWidthDefault,10)>0){O.htmlElement.style.borderWidth=B.frameBorderWidthDefault;O.htmlElement.style.borderColor=B.frameBorderColorDefault}if(parseInt(B.frameBorderRadius,10)>0){O.htmlElement.style.borderRadius=B.frameBorderRadius}}f.prototype.setTitleBarClassName=function(q,r){var s=this;if(q){s.titleBarClassNameDefault=q;s.titleBarClassNameFocused=q}if(r){s.titleBarClassNameFocused=r}return s};f.prototype.addFrameComponent=function(q){var r=this;r.frameComponentMap[q.id]=q;r.canvas.canvasElement.appendChild(q.htmlElement);return r};f.prototype.getFrameComponentElement=function(r){var q=this;return q.frameComponentMap[r].htmlElement};f.prototype.removeFrameComponentById=function(q){var s=this;var r=s.frameComponentMap[q];s.canvas.canvasElement.removeChild(r.htmlElement);delete s.frameComponentMap[q]};f.prototype.setTitle=function(s){var q=this;if(q.showTitleBar){var r=document.createTextNode(s);q.titleBar.firstChild.replaceChild(r,q.titleBar.firstChild.firstChild)}return q};f.prototype.resize=function(v,r,C,B){var x=this;var q=parseInt(x.htmlElement.style.left,10);var w=parseInt(x.htmlElement.style.top,10);var t=parseInt(x.htmlElement.style.width,10);var s=parseInt(x.htmlElement.style.height,10);x.htmlElement.style.left=parseInt(q+v,10)+"px";x.htmlElement.style.top=parseInt(w+r,10)+"px";x.htmlElement.style.width=parseInt(t+C,10)+"px";x.htmlElement.style.height=parseInt(s+B,10)+"px";var u=parseInt(x.canvas.canvasElement.style.width,10);var A=parseInt(x.canvas.canvasElement.style.height,10);x.canvas.canvasElement.style.width=(u+C)+"px";x.canvas.canvasElement.style.height=(A+B)+"px";if(x.showTitleBar){x.titleBar.style.width=(u+C)+"px"}else{}for(var y in x.canvas.beanList){var z=x.canvas.beanList[y];if(z.htmlElement.typeName=="cmarkerwindow"){if(z.htmlElement.usage=="RD"){z.htmlElement.style.left=(parseInt(z.htmlElement.style.left,10)+C)+"px";z.htmlElement.style.top=(parseInt(z.htmlElement.style.top,10)+B)+"px"}else{if(z.htmlElement.usage=="DD"){z.htmlElement.style.width=(parseInt(z.htmlElement.style.width,10)+C)+"px";z.htmlElement.style.top=(parseInt(z.htmlElement.style.top,10)+B)+"px"}else{if(z.htmlElement.usage=="RR"){z.htmlElement.style.left=(parseInt(z.htmlElement.style.left,10)+C)+"px";z.htmlElement.style.height=(parseInt(z.htmlElement.style.height,10)+B)+"px"}}}}}};f.prototype.canvasMouseDown=function(r){var q=this;document.body.ondrag=function(){return false};document.body.onselectstart=function(){return false};if(this.parentCFrame.parentCanvas.mouseDownSource==null){this.parentCFrame.parentCanvas.mouseDownSource="childcanvas"}};f.prototype.mouseUp=function(q){this.canvas.mouseUp(q)};f.prototype.close=function(q){this.parentObject.parentCanvas.removeBean(this.parentObject.id)};f.prototype.closeFrame=function(r){var q=this;this.parentCanvas.removeBean(q.windowId)};f.prototype.contextMenu=function(){var q="CFrame";return false};f.prototype.setTitleBarTextColor=function(r){var q=this;q.titleBar.style.color=r};f.prototype.setPosition=function(q,v,t){var u=this;var r=u.getWidth();var s=u.getHeight();u._setPositionInternally(q,v,t,r,s);return u};f.prototype._setPositionInternally=function(q,v,t,r,s){var u=this;if(t){u.anchor=t}if(!t||l.LEFT_TOP==t){u.htmlElement.style.left=q+"px";u.htmlElement.style.top=v+"px"}else{if(l.HCENTER_TOP==t){u.htmlElement.style.left=(-r/2+q)+"px";u.htmlElement.style.top=v+"px"}else{if(l.RIGHT_TOP==t){u.htmlElement.style.left=(-r+q)+"px";u.htmlElement.style.top=v+"px"}else{if(l.LEFT_VCENTER==t){u.htmlElement.style.left=q+"px";u.htmlElement.style.top=(-s/2+v)+"px"}else{if(l.HCENTER_VCENTER==t){u.htmlElement.style.left=(-r/2+q)+"px";u.htmlElement.style.top=(-s/2+v)+"px"}else{if(l.RIGHT_VCENTER==t){u.htmlElement.style.left=(-r+q)+"px";u.htmlElement.style.top=(-s/2+v)+"px"}else{if(l.LEFT_BOTTOM==t){u.htmlElement.style.left=q+"px";u.htmlElement.style.top=(-s+v)+"px"}else{if(l.HCENTER_BOTTOM==t){u.htmlElement.style.left=(-r/2+q)+"px";u.htmlElement.style.top=(-s+v)+"px"}else{if(l.RIGHT_BOTTOM==t){u.htmlElement.style.left=(-r+q)+"px";u.htmlElement.style.top=(-s+v)+"px"}}}}}}}}}};f.prototype.getPosition=function(){var u=this;var r=u.getWidth();var t=u.getHeight();var q;var v;var s=u.anchor;if(!s||l.LEFT_TOP==s){q=parseInt(u.htmlElement.style.left,10);v=parseInt(u.htmlElement.style.top,10)}else{if(l.HCENTER_TOP==s){q=parseInt(u.htmlElement.style.left,10)+r/2;v=parseInt(u.htmlElement.style.top,10)}else{if(l.RIGHT_TOP==s){q=parseInt(u.htmlElement.style.left,10)+r;v=parseInt(u.htmlElement.style.top,10)}else{if(l.LEFT_VCENTER==s){q=parseInt(u.htmlElement.style.left,10);v=parseInt(u.htmlElement.style.top,10)+t/2}else{if(l.HCENTER_VCENTER==s){q=parseInt(u.htmlElement.style.left,10)+r/2;v=parseInt(u.htmlElement.style.top,10)+t/2}else{if(l.RIGHT_VCENTER==s){q=parseInt(u.htmlElement.style.left,10)+r;v=parseInt(u.htmlElement.style.top,10)+t/2}else{if(l.LEFT_BOTTOM==s){q=parseInt(u.htmlElement.style.left,10);v=parseInt(u.htmlElement.style.top,10)+t}else{if(l.HCENTER_BOTTOM==s){q=parseInt(u.htmlElement.style.left,10)+r/2;v=parseInt(u.htmlElement.style.top,10)+t}else{if(l.RIGHT_BOTTOM==s){q=parseInt(u.htmlElement.style.left,10)+r;v=parseInt(u.htmlElement.style.top,10)+t}}}}}}}}}return{x:q,y:v,anchor:s}};f.prototype.getLeft=function(){var q=this;return parseInt(q.htmlElement.style.left,10)};f.prototype.getTop=function(){var q=this;return parseInt(q.htmlElement.style.top,10)};f.prototype.getWidth=function(){var q=this;return parseInt(q.htmlElement.style.width,10)};f.prototype.getHeight=function(){var q=this;return parseInt(q.htmlElement.style.height,10)};f.prototype.setSize=function(r,q){var s=this;s.resize(0,0,r-s.getWidth(),q-s.getHeight(),true);return s};f.prototype.getWindowId=function(){var q=this;return q.windowId};g(m,f);function m(A,r,z,q,C,u){var B=r;var y=z;var w=q;var t=C;var D=u.zindex;var v=null;var x=this;this.minFrameWidth=128;this.minWindowHeight=32;this.overrayTransparentScreenEnabled=false;this.overrayTransparentScreenOnResize=true;this.titleBarColorFocused=u.titleBarColorFocused;this.titleBarColorDefault=u.titleBarColorDefault;this.titleBarCaptionColorDefault=u.titleBarCaptionColorDefault;this.titleBarCaptionColorFocused=u.titleBarCaptionColorFocused;m.superConstructor.call(x,A,B,y,w,t,D,v,u);x.frameBorderColorDefault=u.frameBorderColorDefault;x.frameBorderColorFocused=u.frameBorderColorFocused;x.frameBorderWidthDefault=u.frameBorderWidthDefault;x.frameBorderWidthFocused=u.frameBorderWidthFocused;x.iframe=null;x.ifDelta=0;x.resizable=true;x.onMouseMoveOnIframe=null;x.onMouseUpOnIframe=null;x._hasFocus=false;x._hasFocusTime=0;x.htmlElement.typeName="cifwindow";var s="riversun_"+A;x.dframe=document.createElement("div");x.iframe=document.createElement("iframe");x.iframe.name=s;x.iframe.id=s;x.iframe.frameBorder="0";x.iframe.scrolling="no";x.iframe.zIndex=-1;x.iframe.allowTransparency="true";x.iframe.width=x.canvasNetWidth-x.ifDelta+0;x.iframe.height=x.canvasNetHeight-x.ifDelta+0;x.showTitleBar=u.showTitleBar;x.getFrameInnerBorderRadius=u.getFrameInnerBorderRadius;x.frameBorderRadius=u.frameBorderRadius;x.adjustFrameBorderRadius();x.useIframe=false;x.canvas.canvasElement.appendChild(x.iframe);x.canvas.canvasElement.appendChild(x.dframe);this.setUseIframe=function(E){x.useIframe=E;x.iframe.style.visibility="hidden";x.iframe.style.position="absolute";x.iframe.style.left="0px";x.iframe.style.top="0px";x.iframe.style.width="100%";x.iframe.style.height="100%";x.dframe.style.visibility="hidden";x.dframe.style.position="absolute";x.dframe.style.left="0px";x.dframe.style.top="0px";x.dframe.style.width="100%";x.dframe.style.height="100%";if(E){x.iframe.style.visibility="visible";x.dframe.style.visibility="hidden"}else{x.iframe.style.visibility="hidden";x.dframe.style.visibility="visible"}};x.setUseIframe(u.useIframe);if(x.overrayTransparentScreenEnabled||x.overrayTransparentScreenOnResize){x.transparence=document.createElement("span");x.transparence.style.position="absolute";x.transparence.style.left="0px";x.transparence.style.top="0px";x.transparence.style.width="0px";x.transparence.style.height="0px";x.transparence.style.zIndex=4;x.transparence.style.borderWidth="0px";x.transparence.style.borderColor="#ff00ee";x.transparence.style.cursor="default";x.canvas.canvasElement.style.backgroundColor=u.frameBackgroundColor;x.canvas.canvasElement.appendChild(x.transparence)}}m.prototype.getFrameView=function(){var q=this;return q.dframe};m.prototype.setHTML=function(q){var r=this;r.dframe.innerHTML=q};m.prototype.$=function(t){var s=this;if(s.useIframe){var r=s.iframe.contentWindow.document;return r.querySelector(t)}else{return s.dframe.querySelector(t)}};m.prototype.adjustFrameBorderRadius=function(){var r=this;if(parseInt(r.frameBorderRadius,10)>0){var q=r.getFrameInnerBorderRadius(r,r._hasFocus);if(r.showTitleBar){r.canvas.canvasElement.style.borderBottomRightRadius=q;r.canvas.canvasElement.style.borderBottomLeftRadius=q;r.iframe.style.borderBottomRightRadius=q;r.iframe.style.borderBottomLeftRadius=q;r.titleBar.style.borderTopLeftRadius=q;r.titleBar.style.borderTopRightRadius=q}else{r.canvas.canvasElement.style.borderRadius=q;r.iframe.style.borderRadius=q}if(r.dframe){r.dframe.style.borderBottomRightRadius=q;r.dframe.style.borderBottomLeftRadius=q}}};m.prototype.handleReleasingFocus=function(t){var s=this;s._hasFocus=false;s.titleBar.style.backgroundColor=s.titleBarColorDefault;s.titleBar.style.color=s.titleBarCaptionColorDefault;if(s.frameBorderColorDefault){s.htmlElement.style.borderColor=s.frameBorderColorDefault}if(s.frameBorderWidthDefault){s.htmlElement.style.borderWidth=s.frameBorderWidthDefault;s.adjustFrameBorderRadius()}if(s.htmlElement.typeName=="cifwindow"){if(s.overrayTransparentScreenEnabled){s.transparence.style.width=parseInt(s.iframe.width,10)+"px";s.transparence.style.height=parseInt(s.iframe.height,10)+"px"}}for(var q in s.frameComponentMap){var r=s.frameComponentMap[q];r.handleReleasingFocus()}if(s.titleBarBorderBottomDefault){s.titleBar.style.borderBottom=s.titleBarBorderBottomDefault}s.titleBar.className=s.titleBarClassNameDefault;return s};m.prototype.handleTakingFocus=function(t){var s=this;s._hasFocus=true;s._hasFocus=Date.now();if(s.overrayTransparentScreenEnabled){s.transparence.style.width="0px";s.transparence.style.height="0px"}s.titleBar.style.backgroundColor=s.titleBarColorFocused;s.titleBar.style.color=s.titleBarCaptionColorFocused;if(s.frameBorderColorFocused){s.htmlElement.style.borderColor=s.frameBorderColorFocused}if(s.frameBorderWidthFocused){s.htmlElement.style.borderWidth=s.frameBorderWidthFocused;s.adjustFrameBorderRadius()}if(s.titleBarBorderBottomFocused){s.titleBar.style.borderBottom=s.titleBarBorderBottomFocused}for(var q in s.frameComponentMap){var r=s.frameComponentMap[q];r.handleTakingFocus()}s.titleBar.className=s.titleBarClassNameFocused;return s};m.prototype.show=function(){var q=this;q.htmlElement.style.visibility="visible";q.requestFocus();return q};m.prototype.hide=function(){var q=this;q.htmlElement.style.visibility="hidden";return q};m.prototype.onmouseDown=function(u){var q=this;document.body.ondrag=function(){return false};document.body.onselectstart=function(){return false};q.decorator=f.prototype.onmouseDown;q.decorator(u);var s=q.parent;var t=q.parentCanvas;for(var r in t.beanList){var v=t.beanList[r];if(r==s.getWindowId()){}else{v.handleReleasingFocus()}}s.handleTakingFocus()};m.prototype.mouseUp=function(r){var q=this;if(q.overrayTransparentScreenEnabled||q.overrayTransparentScreenOnResize){if(q.parentCanvas.onTopObject==q){q.transparence.style.width="0px";q.transparence.style.height="0px"}else{if(q.overrayTransparentScreenEnabled){q.transparence.style.width=parseInt(q.iframe.width)+"px";q.transparence.style.height=parseInt(q.iframe.height)+"px"}}}q.decorator=f.prototype.mouseUp;q.decorator(r);document.body.ondrag=null;document.body.onselectstart=null};m.prototype.setMinFrameSize=function(r,q){var s=this;s.minFrameWidth=r;s.minWindowHeight=q};m.prototype.resize=function(y,t,F,E,r){var x=this;if(!x.resizable){return null}var q=parseInt(x.htmlElement.style.left,10);var z=parseInt(x.htmlElement.style.top,10);var v=parseInt(x.htmlElement.style.width,10);var u=parseInt(x.htmlElement.style.height,10);if(r&&(v+F<x.minFrameWidth&F<0)){x.htmlElement.style.width=v+"px";F=0}if(r&&(u+E<x.minWindowHeight&E<0)){x.htmlElement.style.height=u;E=0}x.htmlElement.style.left=(q+y)+"px";x.htmlElement.style.top=(z+t)+"px";x.htmlElement.style.width=(v+F)+"px";x.htmlElement.style.height=(u+E)+"px";var w=parseInt(x.canvas.canvasElement.style.width,10);var D=parseInt(x.canvas.canvasElement.style.height,10);x.canvas.canvasElement.style.width=(w+F)+"px";x.canvas.canvasElement.style.height=(D+E)+"px";x.titleBar.style.width=(w-x.ifDelta+F+0)+"px";x.iframe.width=(w-x.ifDelta+F+0)+"px";x.iframe.height=(D-x.ifDelta+E+x.frameHeightAdjust)+"px";if(x.overrayTransparentScreenEnabled||x.overrayTransparentScreenOnResize){x.transparence.style.width=parseInt(x.iframe.width)+"px";x.transparence.style.height=parseInt(x.iframe.height)+"px"}for(var s in x.frameComponentMap){var B=x.frameComponentMap[s];B.updateAlign()}for(var A in x.canvas.beanList){var C=x.canvas.beanList[A];if(C.htmlElement.typeName=="cmarkerwindow"){if(C.htmlElement.usage=="RD"){C.htmlElement.style.left=(parseInt(C.htmlElement.style.left)+F)+"px";C.htmlElement.style.top=(parseInt(C.htmlElement.style.top)+E)+"px"}else{if(C.htmlElement.usage=="DD"){C.htmlElement.style.width=(parseInt(C.htmlElement.style.width)+F)+"px";C.htmlElement.style.top=(parseInt(C.htmlElement.style.top)+E)+"px"}else{if(C.htmlElement.usage=="RR"){C.htmlElement.style.left=(parseInt(C.htmlElement.style.left)+F)+"px";C.htmlElement.style.height=(parseInt(C.htmlElement.style.height)+E)+"px"}}}}}};m.prototype.resizeDirect=function(q,z,r){var u=this;if(!u.resizable){return null}u.htmlElement.style.width=q+"px";u.htmlElement.style.height=z+"px";var t=parseInt(u.canvas.canvasElement.style.width);var y=parseInt(u.canvas.canvasElement.style.height);u.canvas.canvasElement.style.width=q+"px";u.canvas.canvasElement.style.height=z+"px";u.titleBar.style.width=(q-u.ifDelta)+"px";u.iframe.width=q-u.ifDelta+"px";u.iframe.height=z-u.ifDelta+u.frameHeightAdjust+"px";if(u.overrayTransparentScreenEnabled||u.overrayTransparentScreenOnResize){u.transparence.style.width=parseInt(u.iframe.width)+"px";u.transparence.style.height=parseInt(u.iframe.height)+"px"}for(var s in u.frameComponentMap){var w=u.frameComponentMap[s];w.updateAlign()}for(var v in u.canvas.beanList){var x=u.canvas.beanList[v];if(x.htmlElement.typeName=="cmarkerwindow"){if(x.htmlElement.usage=="RD"){x.htmlElement.style.left=q+"px";x.htmlElement.style.top=z+"px"}else{if(x.htmlElement.usage=="DD"){x.htmlElement.style.width=q+"px";x.htmlElement.style.top=z+"px"}else{if(x.htmlElement.usage=="RR"){x.htmlElement.style.left=q+"px";x.htmlElement.style.height=z+"px"}}}}}};m.prototype.requestFocus=function(){var t=this;var r=t.parentCanvas.beanList;for(var q in r){var s=r[q];if(q==t.getWindowId()){s.handleTakingFocus()}else{s.handleReleasingFocus()}}t.parentCanvas.pullUp(t.id)};m.prototype.setUrl=function(q){var r=this;return new Promise(function(t,s){if(q){r.setUseIframe(true)}else{r.setUseIframe(false);t()}r.iframe.src=q;r.iframe.onload=function(){r.iframe.contentWindow.document.onmousemove=function(x){var w=r.getLeft();var u=r.getTop();var v=document.createEvent("MouseEvents");v.initMouseEvent("mousemove",true,false,window,x.detail,x.screenX,x.screenY,(x.pageX+w),(x.pageY+u),x.ctrlKey,x.altKey,x.shiftKey,x.metaKey,x.button,null);r.parentCanvas.windowMouseMove(v);if(r.onMouseMoveOnIframe){r.onMouseMoveOnIframe(v)}};r.iframe.contentWindow.document.onmouseup=function(x){var w=r.getLeft();var u=r.getTop();var v=document.createEvent("MouseEvents");v.initMouseEvent("mouseup",true,false,window,x.detail,x.screenX,x.screenY,(x.pageX+w),(x.pageY+u),x.ctrlKey,x.altKey,x.shiftKey,x.metaKey,x.button,null);r.parentCanvas.windowMouseUp(v);if(r.onMouseUpOnIframe){r.onMouseUpOnIframe(v)}};t(r.iframe.contentWindow.document)}})};m.prototype.getIfDocument=function(){var q=this;return q.iframe.contentWindow.document};m.prototype.setScrolling=function(r){var q=this;q.iframe.scrolling=r};m.prototype.getScrolling=function(r){var q=this;return q.iframe.scrolling};m.prototype.setResizable=function(q){var r=this;r.resizable=q;if(!q){r.removeMarkers2()}return r};g(i,j);function i(r,w,v,u,s,q){i.superConstructor.call(this,r,w,v,u,s,q);var t=this}i.prototype.getWindow=function(q){var r=this;return r.beanList[q]};i.prototype.addWindow=function(r){var q=this;q.addBean(r)};i.prototype.windowMouseMove=function(x){var w=this;if(w.currentObject==null){return null}var t=false;var s=w.beanList;for(var q in s){var v=s[q];var u=v.canvas.mouseMove(x);t=t|(u!=null);if(u!=null){if(u.targetTypeName=="cmarkerwindow"){var r=u.targetObject;if(r.usage=="RD"){v.resize(0,0,u.deltaX,u.deltaY,true)}else{if(r.usage=="DD"){v.resize(0,0,0,u.deltaY,true)}else{if(r.usage=="RR"){v.resize(0,0,u.deltaX,0,true)}}}}}}if(!t&&this.mouseDownSource!="childcanvas"){w.mouseMove(x)}};i.prototype.windowMouseUp=function(u){var t=this;t.mouseUp(u);var r=t.beanList;for(var q in r){var s=r[q];s.mouseUp(u)}};i.prototype.removeBean=function(s){var v=this;var u=v.beanList;var t=u[s];if(t==null){return}var w=t._hasFocus;v.canvasElement.removeChild(t.htmlElement);delete u[s];var r=0;var q=null;if(w){for(var s in u){var x=u[s];if(r<=x._hasFocusTime){r=x._hasFocusTime;q=x}}if(q){q.requestFocus()}}};g(c,d);function c(r,x,w,t,q,s,v){var u=this;c.superConstructor.call(this,r,x,w,t,q,s,v);u.htmlElement.typeName="cmarkerwindow";u.htmlElement.usage=v;u.htmlElement.isRangeLimited=false;u.htmlElement.style.borderStyle="none";u.htmlElement.style.zIndex=4}function p(){var s=this;document.onmouseup=q;document.onmousemove=r;s.windowManager=new i(document.body,"windowManager_"+s.generateUUID(),0,0,0,0);s.domPartsBuilder=null;function q(t){s.windowManager.windowMouseUp(t)}function r(u){s.windowManager.windowMouseMove(u);var t=u.pageX;var v=u.pageY}}p.prototype.getDomPartsBuilder=function(){var q=this;if(!q.domPartsBuilder){q.domPartsBuilder=new o()}return q.domPartsBuilder};p.prototype.createFrame=function(w,v,t,q,r){var u=this;if(!r){r=u.createFrameAppearance()}r.initialize();var s="window_"+u.generateUUID();var x=new m(s,w,v,t,q,r);x.hide();u.windowManager.addWindow(x);return x};p.prototype.generateUUID=function(){var r=Date.now();var q="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var s=(r+Math.random()*16)%16|0;r=Math.floor(r/16);return(t=="x"?s:(s&3|8)).toString(16)});return q};p.prototype.createFrameAppearance=function(){return new b()};p.prototype.createAnimator=function(){return new a()};function h(v,s,q,u,t){var r=this;r.id=v;r.x=q;r.y=u;r.frame=null;r._focusTakingCallabck=null;r._focusReleasingCallabck=null;if(t){r.frameComponentAlign=t}else{r.frameComponentAlign=l.LEFT_TOP}r.htmlElement=s;r.htmlElement.style.zIndex=50}h.prototype.setFocusCallback=function(r,q){var s=this;s._focusTakingCallabck=r;s._focusReleasingCallabck=q};h.prototype.setFrame=function(r){var q=this;q.frame=r;q.htmlElement.parentObject=r;q.updateAlign()};h.prototype.updateAlign=function(){var u=this;var t=u.frameComponentAlign;var q=u.frame;var r=u.htmlElement.style;r.userSelect="none";var z=u.x;var v=u.y;var w=q.getWidth();var s=q.getHeight();var B=r.width;var A=r.height;if(l.LEFT_TOP==t){r.left=z+"px";r.top=v+"px"}else{if(l.HCENTER_TOP==t){r.left=(parseInt(w)/2-parseInt(B)/2+z)+"px";r.top=v+"px"}else{if(l.RIGHT_TOP==t){r.left=(parseInt(w)-parseInt(B)+z)+"px";r.top=v+"px"}else{if(l.LEFT_VCENTER==t){r.left=z+"px";r.top=(parseInt(s)/2-parseInt(A)/2+v)+"px"}else{if(l.HCENTER_VCENTER==t){r.left=(parseInt(w)/2-parseInt(B)/2+z)+"px";r.top=(parseInt(s)/2-parseInt(A)/2+v)+"px"}else{if(l.RIGHT_VCENTER==t){r.left=(parseInt(w)-parseInt(B)+z)+"px";r.top=(parseInt(s)/2-parseInt(A)/2+v)+"px"}else{if(l.LEFT_BOTTOM==t){r.left=z+"px";r.top=(parseInt(s)-parseInt(A)+v)+"px"}else{if(l.HCENTER_BOTTOM==t){r.left=(parseInt(w)/2-parseInt(B)/2+z)+"px";r.top=(parseInt(s)-parseInt(A)+v)+"px"}else{if(l.RIGHT_BOTTOM==t){r.left=(parseInt(w)-parseInt(B)+z)+"px";r.top=(parseInt(s)-parseInt(A)+v)+"px"}}}}}}}}}};h.prototype.handleTakingFocus=function(){var q=this;if(q._focusTakingCallabck){q._focusTakingCallabck()}};h.prototype.handleReleasingFocus=function(){var q=this;if(q._focusReleasingCallabck){q._focusReleasingCallabck()}};function o(){}o.prototype.buildTextButtonAppearance=function(){return new k()};o.prototype.buildTextButton=function(M){var E=M.size;var H=E;var F=E;if(M.width!=null){H=M.width}if(M.height!=null){F=M.height}var C=document.createElement("div");var R=M.borderWidth;var u=M.borderRadius;var B=M.borderColorDefault;var t=M.borderColorFocused;var K=M.borderColorHovered;var I=M.borderColorPressed;var A=M.borderStyleDefault;var s=M.borderStyleFocused;var v=M.borderStyleHovered;var J=M.borderStylePressed;var w=M.backgroundColorDefault;var P=M.backgroundColorFocused;var q=M.backgroundColorHovered;var D=M.backgroundColorPressed;var Q=M.backgroundBoxShadow;var O=M.caption;var r=M.captionColorDefault;var G=M.captionColorFocused;var N=M.captionColorHovered;var y=M.captionColorPressed;var x=M.captionShiftYpx;var z=M.captionFontRatio;C._hasFrameFocus=false;C._isMouseDown=false;C.style.position="absolute";C.style.top="0px";C.style.left="0px";C.style.width=(H)+"px";C.style.height=(F)+"px";C.style.cursor="pointer";C.onmousedown=function(T){C._isMouseDown=true;C._handleFocusDrawing()};C.onmouseout=function(T){C._isMouseDown=false;C._handleFocusDrawing()};C.onmouseover=function(T){C._handleHoverDrawing()};C.onmouseup=function(T){C._isMouseDown=false;C._handleFocusDrawing()};C._onTakeFocus=function(){C._hasFrameFocus=true;C._handleFocusDrawing()};C._onReleaseFocus=function(){C._hasFrameFocus=false;C._handleFocusDrawing()};C._handleFocusDrawing=function(){if(C._hasFrameFocus){if(C._isMouseDown){C.style.borderColor=I;C.style.borderStyle=J;C.style.backgroundColor=D;C.style.color=y}else{C.style.borderColor=t;C.style.borderStyle=s;C.style.backgroundColor=P;C.style.color=G}}else{if(C._isMouseDown){C.style.borderColor=I;C.style.borderStyle=J;C.style.backgroundColor=D;C.style.color=y}else{C.style.borderColor=B;C.style.borderStyle=A;C.style.backgroundColor=w;C.style.color=r}}};C._handleHoverDrawing=function(){if(C._hasFrameFocus){}else{}if(K){C.style.borderColor=K}if(v){C.style.borderStyle=v}if(q){C.style.backgroundColor=q}if(N){C.style.color=N}};C.style.textAlign="center";C.style.fontSize=(F*z)+"px";C.style.lineHeight=(F)+"px";C.style.borderWidth="1px";if(R!=null){C.style.borderWidth=R+"px"}if(Q!=null){C.style.boxShadow=Q}C.style.borderRadius=(u+parseInt(C.style.borderWidth))+"px";const S=true;if(S&&O){var L=document.createElement("span");L.style.width="100%";L.style.marginTop=parseInt(x);L.style.display="inline-block";L.style.textAlign="center";L.appendChild(document.createTextNode(O));C.appendChild(L)}else{if(!S&&O){C.style.paddingTop=parseInt(x)+"px";C.appendChild(document.createTextNode(O))}}C._handleFocusDrawing();return C};function k(){const q="\u274c";this.size=14;this.width=null;this.height=null;this.borderRadius=2;this.borderWidth=0;this.borderColorDefault="#aaaaaa";this.borderColorFocused=this.borderColorDefault;this.borderColorHovered=null;this.borderColorPressed=this.borderColorDefault;this.borderStyleDefault="solid";this.borderStyleFocused=this.borderStyleDefault;this.borderStyleHovered=null;this.borderStylePressed=this.borderStyleDefault;this.backgroundBoxShadow=null;this.backgroundColorDefault="transparent";this.backgroundColorFocused=this.backgroundColorDefault;this.backgroundColorHovered=null;this.backgroundColorPressed=this.backgroundColorDefault;this.caption=q;this.captionColorDefault="white";this.captionColorFocused=this.captionColorDefault;this.captionColorHovered=null;this.captionColorPressed=this.captionColorDefault;this.captionShiftYpx=0;this.captionFontRatio=1}function a(){this.fps=30;this.durationMillis=200;this.targetFrame=null;this._crrWidth=0;this._crrHeight=0;this._toWidth=0;this._toHeight=0;this._toX=0;this._toY=0;this.pinnedAnimationEnabled=false;this._pinX=0;this._pinY=0;this._pinAnchor=null}a.prototype.set=function(s){var q=this;q.targetFrame=s;q.fromWidth(s.getWidth());q.fromHeight(s.getHeight());q.toWidth(s.getWidth());q.toHeight(s.getHeight());var r=s.getPosition();q.fromPosition(r.x,r.y,r.anchor);return q};a.prototype.get=function(){var q=this;return q.targetFrame};a.prototype.setDuration=function(q){var r=this;r.durationMillis=q;return r};a.prototype.setFPS=function(r){var q=this;q.fps=r;return q};a.prototype.fromPosition=function(q,t,r){var s=this;s.pinnedAnimationEnabled=true;s._pinX=q;s._pinY=t;s.toPosition(q,t);if(r){s._pinAnchor=r}return s};a.prototype.fromWidth=function(r){var q=this;q._crrWidth=r;return q};a.prototype.fromHeight=function(q){var r=this;r._crrHeight=q;return r};a.prototype.toWidth=function(r){var q=this;q._toWidth=r;return q};a.prototype.toHeight=function(q){var r=this;r._toHeight=q;return r};a.prototype.toPosition=function(q,s){var r=this;r._toX=q;r._toY=s;return r};a.prototype.toX=function(q){var r=this;r._toX=q;return r};a.prototype.toY=function(q){var r=this;r._toY=q;return r};a.prototype.start=function(q){var s=this;var t=s._crrWidth;var r=s._crrHeight;var v=s._pinX;var u=s._pinY;return new Promise(function(E,G){var A=s.fps*(s.durationMillis/1000);var F=(s._toWidth-t)/A;var D=(s._toHeight-r)/A;var x=(s._toX-v)/A;var w=(s._toY-u)/A;var C=s.durationMillis/A;var B=0;function y(){var H=new e();H.setIntervalMillis(C);H.setCallback(function(M){if(B==A){var I=s._toWidth;var L=s._toHeight;var K=v+x*B;var J=u+w*B;if(s.pinnedAnimationEnabled){s.targetFrame._setPositionInternally(K,J,s._pinAnchor,I,L)}s.targetFrame.resizeDirect(I,L);s._crrWidth=I;s._crrHeight=L;s._pinX=K;s._pinY=J}if(B==(A+1)){M.stopTimer();E(s);return}var I=t+F*B;var L=r+D*B;var K=v+x*B;var J=u+w*B;if(s.pinnedAnimationEnabled){s.targetFrame._setPositionInternally(K,J,s._pinAnchor,I,L)}s.targetFrame.resizeDirect(I,L);if(B==0){s.targetFrame.show()}B++});H.startTimer()}if(q){var z=new e();z.setIntervalMillis(q);z.setCallback(function(H){H.stopTimer();y()});z.startTimer()}else{y()}})};var e=(function(){function q(){var s=this;s._timerId=null;s._isRunning=false;s._timerInterval=0;s._internalCallback=r;s._timerMethod=null;function r(){if(s._timerMethod){s._timerMethod(s)}if(s._isRunning){clearTimeout(s._timerId);s._timerId=setTimeout(s._internalCallback,s._timerInterval)}}}q.prototype.setCallback=function(r){var s=this;s._timerMethod=r;return s};q.prototype.setIntervalMillis=function(r){var s=this;s._timerInterval=r;return s};q.prototype.stopTimer=function(){var r=this;r._isRunning=false;return r};q.prototype.startTimer=function(){var r=this;if(r._timerInterval>0){r._timerId=setTimeout(r._internalCallback,r._timerInterval);r._isRunning=true}return r};return q})();Object.freeze(n);return p})();